import{E as u}from"./chunk-S7H63ZRT.js";import{i as o,ia as i,l as c,na as b}from"./chunk-PPU4QFJU.js";var a=(()=>{class t{create(e){return typeof ResizeObserver>"u"?null:new ResizeObserver(e)}static \u0275fac=function(s){return new(s||t)};static \u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),E=(()=>{class t{nzResizeObserverFactory;observedElements=new Map;constructor(e){this.nzResizeObserverFactory=e}ngOnDestroy(){this.observedElements.forEach((e,s)=>this.cleanupObserver(s))}observe(e){let s=u(e);return new o(r=>{let v=this.observeElement(s).subscribe(r);return()=>{v.unsubscribe(),this.unobserveElement(s)}})}observeElement(e){if(this.observedElements.has(e))this.observedElements.get(e).count++;else{let s=new c,r=this.nzResizeObserverFactory.create(n=>s.next(n));r&&r.observe(e),this.observedElements.set(e,{observer:r,stream:s,count:1})}return this.observedElements.get(e).stream}unobserveElement(e){this.observedElements.has(e)&&(this.observedElements.get(e).count--,this.observedElements.get(e).count||this.cleanupObserver(e))}cleanupObserver(e){if(this.observedElements.has(e)){let{observer:s,stream:r}=this.observedElements.get(e);s&&s.disconnect(),r.complete(),this.observedElements.delete(e)}}static \u0275fac=function(s){return new(s||t)(b(a))};static \u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();export{E as a};
