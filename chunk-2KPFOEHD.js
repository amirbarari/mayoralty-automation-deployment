import{d as ce,e as de,f as Ce,g as fe,h as ze,i as ge,j as _e}from"./chunk-WRUICC57.js";import"./chunk-S76HEK6X.js";import{b as he}from"./chunk-WLIVQ3RG.js";import"./chunk-2SBPQ5PO.js";import{a as be,b as Ae,c as Me,d as Fe,e as ve}from"./chunk-YOIS5LYM.js";import{a as ee,b as ne,c as ie}from"./chunk-GAPH4TJR.js";import"./chunk-K62VDMMU.js";import{a as L,b as W}from"./chunk-JLK6BMKQ.js";import"./chunk-3GG5JXOG.js";import{a as me,b as pe}from"./chunk-M7BDISBG.js";import{a as re,b as ae,c as le}from"./chunk-S6C6MKMF.js";import{a as h}from"./chunk-DEEABJD6.js";import{f as te,g as ue,h as oe}from"./chunk-UQPNZCHR.js";import"./chunk-PZ3WQJJL.js";import{b as se}from"./chunk-R7V4VY4G.js";import{$ as X,L as q,M as f,O as H,P as $,T as J,W as K,Y as Q,aa as Y,ba as Z}from"./chunk-WURTGZ7Q.js";import{f as j,g as U,h as G,i as B}from"./chunk-4RJVJPSO.js";import{r as I,x as D,xa as k,ya as R}from"./chunk-7PNVVBYH.js";import"./chunk-MHGKYAZL.js";import"./chunk-FHD2U5CN.js";import{Ca as s,Da as m,Ec as E,Fb as S,Fc as r,Gc as P,H as x,Jc as N,Kc as O,Lb as A,Lc as V,Tb as p,Uc as w,dc as g,ec as _,fc as t,gc as n,hc as c,ic as v,jc as y,lc as T,rb as l,rc as z,tc as M,wb as b}from"./chunk-Q7WSBUFH.js";var F=(u,i)=>i.id;function Te(u,i){u&1&&c(0,"span",22)}function Ne(u,i){if(u&1){let e=T();t(0,"tr")(1,"td"),r(2),n(),t(3,"td",23)(4,"button",24),r(5," \u0648\u06CC\u0631\u0627\u06CC\u0634 "),n(),t(6,"button",25),z("nzOnConfirm",function(){let a=s(e).$implicit,d=M();return m(d.deleteRegion(a.id))}),r(7," \u062D\u0630\u0641 "),n()()()}if(u&2){let e=i.$implicit;l(2),P(e.name)}}function Oe(u,i){if(u&1&&(v(0),t(1,"p",26),r(2,"\u0645\u0646\u0637\u0642\u0647 \u062C\u062F\u06CC\u062F\u06CC \u0628\u0647 \u0633\u06CC\u0633\u062A\u0645 \u0627\u0636\u0627\u0641\u0647 \u06A9\u0646\u06CC\u062F."),n(),t(3,"form",27)(4,"nz-form-item")(5,"nz-form-label",28),r(6,"\u0646\u0627\u0645 \u0645\u0646\u0637\u0642\u0647"),n(),t(7,"nz-form-control",29),c(8,"input",30),n()()(),y()),u&2){let e=M();l(3),p("formGroup",e.regionForm)}}function Ve(u,i){if(u&1&&c(0,"nz-option",33),u&2){let e=i.$implicit;p("nzValue",e.id)("nzLabel",e.name)}}function xe(u,i){if(u&1&&c(0,"nz-option",33),u&2){let e=i.$implicit;p("nzValue",e.id)("nzLabel",e.name+" "+e.family)}}function Se(u,i){if(u&1&&c(0,"nz-option",33),u&2){let e=i.$implicit;p("nzValue",e.id)("nzLabel",e.name)}}function Ee(u,i){if(u&1&&(v(0),t(1,"p",26),r(2,"\u06CC\u06A9 \u0645\u0633\u0626\u0648\u0644 \u0628\u0647 \u0645\u0646\u0637\u0642\u0647 \u0645\u0648\u0631\u062F \u0646\u0638\u0631 \u0627\u062E\u062A\u0635\u0627\u0635 \u062F\u0647\u06CC\u062F."),n(),t(3,"form",27)(4,"nz-form-item")(5,"nz-form-label",28),r(6,"\u0645\u0646\u0637\u0642\u0647"),n(),t(7,"nz-form-control",31)(8,"nz-select",32),g(9,Ve,1,2,"nz-option",33,F),n()()(),t(11,"nz-form-item")(12,"nz-form-label",28),r(13,"\u06A9\u0627\u0631\u0628\u0631"),n(),t(14,"nz-form-control",34)(15,"nz-select",35),g(16,xe,1,2,"nz-option",33,F),n()()(),t(18,"nz-form-item")(19,"nz-form-label",28),r(20,"\u0646\u0648\u0639 \u0633\u0645\u062A"),n(),t(21,"nz-form-control",36)(22,"nz-select",37),g(23,Se,1,2,"nz-option",33,F),n()()(),t(25,"nz-form-item")(26,"nz-form-label",28),r(27,"\u0634\u0645\u0627\u0631\u0647 \u062A\u0644\u0641\u0646"),n(),t(28,"nz-form-control",38),c(29,"input",39),n()()(),y()),u&2){let e=M();l(3),p("formGroup",e.assignmentForm),l(6),_(e.regions),l(7),_(e.persons),l(7),_(e.jobPostTypes)}}var ye=class u{constructor(i,e,o){this.fb=i;this.notification=e;this.http=o}isRegionModalVisible=!1;isAssignmentModalVisible=!1;regionForm;assignmentForm;regions=[];persons=[];jobPostTypes=[];regionApiUrl=h.endpoints.region;personApiUrl=h.endpoints.person;jobPostTypeApiUrl=h.endpoints.jobPostType;jobPostAssignmentApiUrl=h.endpoints.jobPostAssignment;ngOnInit(){this.loadInitialData(),this.regionForm=this.fb.group({name:["",[f.required]]}),this.assignmentForm=this.fb.group({regionId:[null,[f.required]],userId:[null,[f.required]],jobPostTypeId:[null,[f.required]],phoneNumber:["",[f.required,f.pattern(/^[0-9]+$/)]]})}loadInitialData(){x({regions:this.http.get(this.regionApiUrl),persons:this.http.get(this.personApiUrl),jobPostTypes:this.http.get(this.jobPostTypeApiUrl)}).subscribe({next:({regions:i,persons:e,jobPostTypes:o})=>{this.regions=i,this.persons=e,this.jobPostTypes=o.filter(a=>a.party_type_id===1)},error:i=>{this.notification.error("\u062E\u0637\u0627","\u062F\u0631\u06CC\u0627\u0641\u062A \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0627\u0648\u0644\u06CC\u0647 \u0628\u0627 \u0645\u0634\u06A9\u0644 \u0645\u0648\u0627\u062C\u0647 \u0634\u062F."),console.error(i)}})}showRegionModal(){this.regionForm.reset(),this.isRegionModalVisible=!0}handleRegionOk(){this.regionForm.valid?this.http.post(this.regionApiUrl,this.regionForm.value).subscribe({next:()=>{this.notification.success("\u0645\u0648\u0641\u0642","\u0645\u0646\u0637\u0642\u0647 \u062C\u062F\u06CC\u062F \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u06CC\u062C\u0627\u062F \u0634\u062F."),this.isRegionModalVisible=!1,this.loadInitialData()},error:i=>{this.notification.error("\u062E\u0637\u0627","\u0627\u06CC\u062C\u0627\u062F \u0645\u0646\u0637\u0642\u0647 \u062C\u062F\u06CC\u062F \u0628\u0627 \u0645\u0634\u06A9\u0644 \u0645\u0648\u0627\u062C\u0647 \u0634\u062F."),console.error(i)}}):this.validateForm(this.regionForm)}handleRegionCancel(){this.isRegionModalVisible=!1}deleteRegion(i){let e=`${this.regionApiUrl}${i}/`;this.http.delete(e).subscribe({next:()=>{this.notification.info("\u062D\u0630\u0641 \u0634\u062F","\u0645\u0646\u0637\u0642\u0647 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u06AF\u0631\u062F\u06CC\u062F."),this.loadInitialData()},error:o=>{this.notification.error("\u062E\u0637\u0627","\u062D\u0630\u0641 \u0645\u0646\u0637\u0642\u0647 \u0628\u0627 \u0645\u0634\u06A9\u0644 \u0645\u0648\u0627\u062C\u0647 \u0634\u062F."),console.error(o)}})}showAssignmentModal(){this.assignmentForm.reset(),this.isAssignmentModalVisible=!0}handleAssignmentOk(){if(this.assignmentForm.valid){let i={party_id:Number(this.assignmentForm.value.regionId),person_id:Number(this.assignmentForm.value.userId),job_post_type_id:Number(this.assignmentForm.value.jobPostTypeId),phone:this.assignmentForm.value.phoneNumber};console.log(i),this.http.post(this.jobPostAssignmentApiUrl,i).subscribe({next:()=>{this.notification.success("\u0645\u0648\u0641\u0642","\u0645\u0633\u0626\u0648\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0647 \u0645\u0646\u0637\u0642\u0647 \u0627\u062E\u062A\u0635\u0627\u0635 \u062F\u0627\u062F\u0647 \u0634\u062F."),this.isAssignmentModalVisible=!1},error:e=>{this.notification.error("\u062E\u0637\u0627","\u0627\u062E\u062A\u0635\u0627\u0635 \u0645\u0633\u0626\u0648\u0644 \u0628\u0627 \u0645\u0634\u06A9\u0644 \u0645\u0648\u0627\u062C\u0647 \u0634\u062F."),console.error(e)}})}else this.validateForm(this.assignmentForm)}handleAssignmentCancel(){this.isAssignmentModalVisible=!1}validateForm(i){Object.values(i.controls).forEach(e=>{e.invalid&&(e.markAsDirty(),e.updateValueAndValidity({onlySelf:!0}))})}static \u0275fac=function(e){return new(e||u)(b(X),b(se),b(D))};static \u0275cmp=S({type:u,selectors:[["app-municipal-areas"]],decls:41,vars:9,consts:[["suffixIconSearch",""],["regionsTable",""],[1,"regions-page"],[1,"page-header"],[1,"header-title"],[1,"header-actions"],[1,"dark-search-input"],["nzSearch","",3,"nzAddOnAfter"],["type","text","nz-input","","placeholder","\u062C\u0633\u062A\u062C\u0648\u06CC \u0645\u0646\u0627\u0637\u0642..."],["nz-button","","nzType","primary","nzShape","round",3,"click"],["nz-icon","","nzType","user-add"],["nz-icon","","nzType","plus"],[1,"custom-card"],[1,"custom-card__header"],[1,"custom-card__title"],[1,"custom-card__subtitle"],[1,"custom-card__body"],[1,"financial-table",3,"nzData","nzSize"],[1,"actions-header"],["nzTitle","\u0645\u0646\u0637\u0642\u0647 \u062C\u062F\u06CC\u062F",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzOkText","nzCancelText"],[4,"nzModalContent"],["nzTitle","\u0627\u062E\u062A\u0635\u0627\u0635 \u0645\u0633\u0626\u0648\u0644 \u0628\u0647 \u0645\u0646\u0637\u0642\u0647",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzOkText","nzCancelText"],["nz-icon","","nzType","search"],[1,"actions"],["nz-button","","nzShape","round","nzType","primary","nzSize","small"],["nz-button","","nzDanger","","nzShape","round","nzType","primary","nzSize","small","nz-popconfirm","","nzPopconfirmTitle","\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0645\u0646\u0637\u0642\u0647 \u0645\u0637\u0645\u0626\u0646 \u0647\u0633\u062A\u06CC\u062F\u061F",3,"nzOnConfirm"],[1,"modal-subtitle"],["nz-form","",1,"modal-form",3,"formGroup"],["nzRequired",""],["nzErrorTip","\u0644\u0637\u0641\u0627 \u0646\u0627\u0645 \u0645\u0646\u0637\u0642\u0647 \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F"],["nz-input","","formControlName","name","placeholder","\u0645\u062B\u0627\u0644: \u0645\u0646\u0637\u0642\u0647 \u06F6 \u0634\u0647\u0631\u062F\u0627\u0631\u06CC"],["nzErrorTip","\u0644\u0637\u0641\u0627 \u0645\u0646\u0637\u0642\u0647 \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"],["formControlName","regionId","nzPlaceHolder","\u0645\u0646\u0637\u0642\u0647 \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"],[3,"nzValue","nzLabel"],["nzErrorTip","\u0644\u0637\u0641\u0627 \u06A9\u0627\u0631\u0628\u0631 \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"],["formControlName","userId","nzPlaceHolder","\u06A9\u0627\u0631\u0628\u0631 \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"],["nzErrorTip","\u0644\u0637\u0641\u0627 \u0646\u0648\u0639 \u0633\u0645\u062A \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"],["formControlName","jobPostTypeId","nzPlaceHolder","\u0646\u0648\u0639 \u0633\u0645\u062A \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"],["nzErrorTip","\u0644\u0637\u0641\u0627 \u0634\u0645\u0627\u0631\u0647 \u062A\u0644\u0641\u0646 \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F"],["nz-input","","formControlName","phoneNumber","placeholder","\u0645\u062B\u0627\u0644: 09123456789"]],template:function(e,o){if(e&1){let a=T();t(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),r(4,"\u0645\u0646\u0627\u0637\u0642 \u0634\u0647\u0631\u062F\u0627\u0631\u06CC \u0648 \u0633\u0627\u0632\u0645\u0627\u0646\u200C\u0647\u0627"),n(),t(5,"p"),r(6,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0646\u0627\u0637\u0642 \u0634\u0647\u0631\u062F\u0627\u0631\u06CC \u0648 \u0633\u0627\u0632\u0645\u0627\u0646\u200C\u0647\u0627\u06CC \u0645\u0631\u0628\u0648\u0637 \u0628\u0647 \u0647\u0631 \u0645\u0646\u0637\u0642\u0647"),n()(),t(7,"div",5)(8,"div",6)(9,"nz-input-group",7),c(10,"input",8),n(),A(11,Te,1,0,"ng-template",null,0,w),n(),t(13,"button",9),z("click",function(){return s(a),m(o.showAssignmentModal())}),c(14,"span",10),r(15," \u0627\u062E\u062A\u0635\u0627\u0635 \u0645\u0633\u0626\u0648\u0644 "),n(),t(16,"button",9),z("click",function(){return s(a),m(o.showRegionModal())}),c(17,"span",11),r(18," \u0645\u0646\u0637\u0642\u0647 \u062C\u062F\u06CC\u062F "),n()()(),t(19,"div",12)(20,"div",13)(21,"h2",14),r(22,"\u0644\u06CC\u0633\u062A \u0645\u0646\u0627\u0637\u0642 \u0634\u0647\u0631\u062F\u0627\u0631\u06CC"),n(),t(23,"p",15),r(24,"\u062A\u0645\u0627\u0645 \u0645\u0646\u0627\u0637\u0642 \u0634\u0647\u0631\u062F\u0627\u0631\u06CC \u062A\u0639\u0631\u06CC\u0641 \u0634\u062F\u0647 \u062F\u0631 \u0633\u06CC\u0633\u062A\u0645"),n()(),t(25,"div",16)(26,"nz-table",17,1)(28,"thead")(29,"tr")(30,"th"),r(31,"\u0646\u0627\u0645 \u0645\u0646\u0637\u0642\u0647"),n(),t(32,"th",18),r(33,"\u0639\u0645\u0644\u06CC\u0627\u062A"),n()()(),t(34,"tbody"),g(35,Ne,8,1,"tr",null,F),n()()()()(),t(37,"nz-modal",19),V("nzVisibleChange",function(C){return s(a),O(o.isRegionModalVisible,C)||(o.isRegionModalVisible=C),m(C)}),z("nzOnCancel",function(){return s(a),m(o.handleRegionCancel())})("nzOnOk",function(){return s(a),m(o.handleRegionOk())}),A(38,Oe,9,1,"ng-container",20),n(),t(39,"nz-modal",21),V("nzVisibleChange",function(C){return s(a),O(o.isAssignmentModalVisible,C)||(o.isAssignmentModalVisible=C),m(C)}),z("nzOnCancel",function(){return s(a),m(o.handleAssignmentCancel())})("nzOnOk",function(){return s(a),m(o.handleAssignmentOk())}),A(40,Ee,30,1,"ng-container",20),n()}if(e&2){let a=E(12);l(9),p("nzAddOnAfter",a),l(17),p("nzData",o.regions)("nzSize","middle"),l(9),_(o.regions),l(2),N("nzVisible",o.isRegionModalVisible),p("nzOkText","\u0630\u062E\u06CC\u0631\u0647")("nzCancelText","\u0627\u0646\u0635\u0631\u0627\u0641"),l(2),N("nzVisible",o.isAssignmentModalVisible),p("nzOkText","\u0630\u062E\u06CC\u0631\u0647")("nzCancelText","\u0627\u0646\u0635\u0631\u0627\u0641")}},dependencies:[I,Y,J,q,H,$,Z,K,Q,B,G,j,U,R,k,oe,te,ue,_e,fe,ce,de,ge,Ce,ze,le,ae,re,ve,W,L,Ae,be,Fe,Me,ie,ee,ne,pe,me,he],styles:[".regions-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;padding:2rem;height:100%}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1.5rem}.page-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:600}.page-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0 0}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.dark-search-input[_ngcontent-%COMP%]{min-width:250px}.custom-card[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.custom-card__body[_ngcontent-%COMP%]{overflow-x:auto}.financial-table[_ngcontent-%COMP%]   .actions-header[_ngcontent-%COMP%]{text-align:center}.financial-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem;flex-wrap:nowrap}.modal-subtitle[_ngcontent-%COMP%]{margin-top:-10px;margin-bottom:24px}"]})};export{ye as MunicipalAreasComponent};
