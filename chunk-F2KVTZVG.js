import{a as $,b as j}from"./chunk-6OPEXW6Z.js";import{a as J,b as K}from"./chunk-UIM4XFBN.js";import{a as Q}from"./chunk-GMPNDUJ3.js";import{a as L,b as q,c as G}from"./chunk-6IGVWDGW.js";import{a as H,c as U}from"./chunk-CRAKTTNB.js";import"./chunk-DOTCCSLS.js";import{g as I,j as W,r as B,z as R}from"./chunk-W6PKEPXD.js";import"./chunk-LA4THGQ7.js";import{f as V,g as E,h as A,i as D}from"./chunk-OEHQ7QR6.js";import{q as P,ua as S,va as T,w as k}from"./chunk-O6FUYRUI.js";import"./chunk-CNUMRFCL.js";import"./chunk-FHD2U5CN.js";import{$b as i,Aa as C,Ac as N,Dc as z,Ec as h,Fb as g,Fc as F,Nb as _,Wb as M,Yb as O,Zb as v,_b as Y,ac as o,bc as m,cc as w,dc as x,fc as b,lc as s,mb as c,nc as d,rb as f,za as p,zb as y,zc as l}from"./chunk-PPU4QFJU.js";function Z(a,n){if(a&1){let e=b();i(0,"div",10)(1,"span"),l(2),o(),i(3,"button",14),s("nzOnConfirm",function(){let r=p(e).$implicit,u=d();return C(u.deleteYear(r))}),m(4,"span",15),o()()}if(a&2){let e=n.$implicit;c(2),N(e)}}function ee(a,n){a&1&&m(0,"nz-empty",11)}function ne(a,n){if(a&1){let e=b();w(0),i(1,"div",16)(2,"p"),l(3,"\u0644\u0637\u0641\u0627 \u0633\u0627\u0644 \u0645\u0627\u0644\u06CC \u0645\u0648\u0631\u062F \u0646\u0638\u0631 \u062E\u0648\u062F \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F."),o(),i(4,"nz-input-number",17),F("ngModelChange",function(r){p(e);let u=d();return h(u.newFinancialYear,r)||(u.newFinancialYear=r),C(r)}),o()(),x()}if(a&2){let e=d();c(4),z("ngModel",e.newFinancialYear),_("nzMin",1300)("nzMax",1500)("nzStep",1)}}var X=class a{constructor(n,e){this.notification=n;this.http=e}financialYears=[];isModalVisible=!1;newFinancialYear=null;apiUrl=Q.endpoints.financialYear;ngOnInit(){this.getFinancialYears()}getFinancialYears(){this.http.get(this.apiUrl).subscribe({next:n=>{this.financialYears=n.map(e=>e.year).sort((e,t)=>e-t)},error:n=>{this.notification.error("\u062E\u0637\u0627","\u062F\u0631\u06CC\u0627\u0641\u062A \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0633\u0627\u0644\u200C\u0647\u0627\u06CC \u0645\u0627\u0644\u06CC \u0628\u0627 \u0645\u0634\u06A9\u0644 \u0645\u0648\u0627\u062C\u0647 \u0634\u062F."),console.error(n)}})}showModal(){this.newFinancialYear=null,this.isModalVisible=!0}handleOk(){if(!this.newFinancialYear){this.notification.error("\u062E\u0637\u0627","\u0644\u0637\u0641\u0627 \u0633\u0627\u0644 \u0645\u0627\u0644\u06CC \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F.");return}if(this.financialYears.includes(this.newFinancialYear)){this.notification.warning("\u062A\u06A9\u0631\u0627\u0631\u06CC",`\u0633\u0627\u0644 \u0645\u0627\u0644\u06CC ${this.newFinancialYear} \u0642\u0628\u0644\u0627 \u062B\u0628\u062A \u0634\u062F\u0647 \u0627\u0633\u062A.`);return}let n={year:this.newFinancialYear};this.http.post(this.apiUrl,n).subscribe({next:()=>{this.notification.success("\u0645\u0648\u0641\u0642",`\u0633\u0627\u0644 \u0645\u0627\u0644\u06CC ${this.newFinancialYear} \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0641\u0632\u0648\u062F\u0647 \u0634\u062F.`),this.isModalVisible=!1,this.getFinancialYears()},error:e=>{this.notification.error("\u062E\u0637\u0627","\u0627\u0641\u0632\u0648\u062F\u0646 \u0633\u0627\u0644 \u0645\u0627\u0644\u06CC \u0628\u0627 \u0645\u0634\u06A9\u0644 \u0645\u0648\u0627\u062C\u0647 \u0634\u062F."),console.error(e)}})}handleCancel(){this.isModalVisible=!1}deleteYear(n){let e=`${this.apiUrl}${n}/`;this.http.delete(e).subscribe({next:()=>{this.notification.info("\u062D\u0630\u0641 \u0634\u062F",`\u0633\u0627\u0644 \u0645\u0627\u0644\u06CC ${n} \u062D\u0630\u0641 \u06AF\u0631\u062F\u06CC\u062F.`),this.getFinancialYears()},error:t=>{this.notification.error("\u062E\u0637\u0627",`\u062D\u0630\u0641 \u0633\u0627\u0644 \u0645\u0627\u0644\u06CC ${n} \u0628\u0627 \u0645\u0634\u06A9\u0644 \u0645\u0648\u0627\u062C\u0647 \u0634\u062F.`),console.error(t)}})}static \u0275fac=function(e){return new(e||a)(f(R),f(k))};static \u0275cmp=y({type:a,selectors:[["app-financial-year"]],decls:23,vars:5,consts:[[1,"financial-year-page"],[1,"page-header"],["nz-button","","nzType","primary","nzShape","round",3,"click"],["nz-icon","","nzType","plus"],[1,"custom-card"],[1,"custom-card__header"],[1,"custom-card__title"],[1,"custom-card__subtitle"],[1,"custom-card__body"],[1,"year-tags-container"],[1,"year-tag"],["nzNotFoundContent","\u062F\u0631 \u062D\u0627\u0644 \u062D\u0627\u0636\u0631 \u0647\u06CC\u0686 \u0633\u0627\u0644 \u0645\u0627\u0644\u06CC \u062A\u0639\u0631\u06CC\u0641 \u0646\u0634\u062F\u0647 \u0627\u0633\u062A."],["nzTitle","\u0627\u06CC\u062C\u0627\u062F \u0633\u0627\u0644 \u0645\u0627\u0644\u06CC \u062C\u062F\u06CC\u062F",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzOkText","nzCancelText","nzOkDisabled"],[4,"nzModalContent"],["nz-button","","nz-popconfirm","","nzPopconfirmTitle","\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0633\u0627\u0644 \u0645\u0627\u0644\u06CC \u0645\u0637\u0645\u0626\u0646 \u0647\u0633\u062A\u06CC\u062F\u061F","nzShape","circle","nzSize","small","nzDanger","",1,"delete-btn",3,"nzOnConfirm"],["nz-icon","","nzType","delete"],[1,"modal-content"],["nzPlaceHolder","\u0645\u062B\u0644\u0627 \u06F1\u06F4\u06F0\u06F3",2,"width","100%",3,"ngModelChange","ngModel","nzMin","nzMax","nzStep"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),l(4,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0633\u0627\u0644 \u0645\u0627\u0644\u06CC"),o(),i(5,"p"),l(6,"\u062A\u0639\u0631\u06CC\u0641 \u0648 \u0645\u062F\u06CC\u0631\u06CC\u062A \u0633\u0627\u0644\u200C\u0647\u0627\u06CC \u0645\u0627\u0644\u06CC \u0633\u06CC\u0633\u062A\u0645"),o()(),i(7,"button",2),s("click",function(){return t.showModal()}),m(8,"span",3),l(9," \u0633\u0627\u0644 \u0645\u0627\u0644\u06CC \u062C\u062F\u06CC\u062F "),o()(),i(10,"div",4)(11,"div",5)(12,"h2",6),l(13,"\u0644\u06CC\u0633\u062A \u0633\u0627\u0644\u200C\u0647\u0627\u06CC \u0645\u0627\u0644\u06CC"),o(),i(14,"p",7),l(15," \u062A\u0645\u0627\u0645 \u0633\u0627\u0644\u200C\u0647\u0627\u06CC \u0645\u0627\u0644\u06CC \u062A\u0639\u0631\u06CC\u0641 \u0634\u062F\u0647 \u062F\u0631 \u0633\u06CC\u0633\u062A\u0645 "),o()(),i(16,"div",8)(17,"div",9),v(18,Z,5,1,"div",10,O),g(20,ee,1,0,"nz-empty",11),o()()()(),i(21,"nz-modal",12),F("nzVisibleChange",function(u){return h(t.isModalVisible,u)||(t.isModalVisible=u),u}),s("nzOnCancel",function(){return t.handleCancel()})("nzOnOk",function(){return t.handleOk()}),g(22,ne,5,4,"ng-container",13),o()),e&2&&(c(18),Y(t.financialYears),c(2),M(t.financialYears.length===0?20:-1),c(),z("nzVisible",t.isModalVisible),_("nzOkText","\u0627\u06CC\u062C\u0627\u062F")("nzCancelText","\u0627\u0646\u0635\u0631\u0627\u0641")("nzOkDisabled",!t.newFinancialYear))},dependencies:[P,B,I,W,D,A,V,E,T,S,j,$,K,J,U,H,G,q,L],styles:[".financial-year-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;height:100%}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.3rem;font-weight:600;color:#e2e8f0;margin:0}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:2rem;color:#94a3b8;margin-top:.25rem}.custom-card[_ngcontent-%COMP%]{background-color:#1e293b;border-radius:.75rem;padding:1.5rem;border:1px solid #334155;flex:1;min-height:20rem}.custom-card__header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.custom-card__title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:600;color:#e2e8f0;margin:0}.custom-card__subtitle[_ngcontent-%COMP%]{font-size:1.5rem;color:#94a3b8;margin-top:.25rem}.year-tags-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem}.year-tag[_ngcontent-%COMP%]{display:inline-flex;gap:1rem;align-items:center;background-color:#334155;color:#cbd5e1;padding:.5rem 1rem;border-radius:9999px;font-weight:500;font-size:1.4rem;transition:all .2s ease-in-out}.year-tag[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{opacity:0;margin-right:-.5rem;margin-left:.5rem;transition:all .2s ease-in-out;background-color:#475569}.year-tag[_ngcontent-%COMP%]:hover{background-color:#475569}.year-tag[_ngcontent-%COMP%]:hover   .delete-btn[_ngcontent-%COMP%]{opacity:1;margin-right:0}nz-empty[_ngcontent-%COMP%]{margin:2rem auto}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.75rem;color:#94a3b8}  .ant-modal-content{background-color:#001529!important}  .ant-modal-header{background-color:#001529!important;border-bottom:1px solid #334155}  .ant-modal-header .ant-modal-title{color:#e2e8f0}  .ant-modal-close-x{color:#94a3b8}  .ant-modal-body p{color:#94a3b8}  .ant-modal-footer{background-color:#001529;border-top:1px solid #334155}  .ant-modal-footer .ant-btn-primary{background-color:#38bdf8;border-color:#38bdf8;color:#0f172a}  .ant-modal-footer .ant-btn-primary:hover,   .ant-modal-footer .ant-btn-primary:focus{background-color:#7dd3fc;border-color:#7dd3fc}  .ant-modal-footer .ant-btn{background-color:transparent;border-color:#334155;color:#e2e8f0}  .ant-modal-footer .ant-btn:hover,   .ant-modal-footer .ant-btn:focus{border-color:#38bdf8;color:#38bdf8}"]})};export{X as FinancialYearComponent};
