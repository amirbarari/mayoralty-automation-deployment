import{d as oe,e as re,f as ue,g as ae,h as le,i as me,j as ce}from"./chunk-PHG3VJEM.js";import"./chunk-HNORQ23J.js";import{b as pe}from"./chunk-WLIVQ3RG.js";import"./chunk-2SBPQ5PO.js";import{a as se,b as de,c as Ce,d as fe,e as ze}from"./chunk-TS3NV7FJ.js";import"./chunk-Y7V7LVZY.js";import"./chunk-K62VDMMU.js";import{a as B,b as G}from"./chunk-JLK6BMKQ.js";import"./chunk-3GG5JXOG.js";import{a as ne,b as ie}from"./chunk-NY5WHTK4.js";import{a as Y,b as Z,c as ee}from"./chunk-POH2GVPE.js";import{a as J}from"./chunk-DEEABJD6.js";import{f as K,h as Q}from"./chunk-BEYQRRZ4.js";import"./chunk-EWNZSDQ6.js";import{b as te}from"./chunk-BVLOTES5.js";import{$ as q,L as I,M as X,O as j,P as U,S as W,V as H,X as R,_ as $,aa as L}from"./chunk-KM43CBUV.js";import{f as V,g as w,h as P,i as E}from"./chunk-4RJVJPSO.js";import{r as O,x,xa as k,ya as D}from"./chunk-7PNVVBYH.js";import"./chunk-MHGKYAZL.js";import"./chunk-FHD2U5CN.js";import{Ca as c,Da as p,Fb as b,Fc as o,Gc as h,Jc as N,Kc as T,Lb as v,Lc as S,Tb as l,dc as y,ec as A,fc as t,gc as n,hc as C,ic as F,jc as M,lc as _,rb as u,rc as f,tc as g,wb as d}from"./chunk-Q7WSBUFH.js";var ge=(a,e)=>e.id;function he(a,e){if(a&1){let i=_();t(0,"tr")(1,"td"),o(2),n(),t(3,"td"),o(4),n(),t(5,"td",15)(6,"button",16),o(7," \u0648\u06CC\u0631\u0627\u06CC\u0634 "),n(),t(8,"button",17),f("nzOnConfirm",function(){let m=c(i).$implicit,s=g();return p(s.deleteGroup(m.id))}),o(9," \u062D\u0630\u0641 "),n()()()}if(a&2){let i=e.$implicit;u(2),h(i.name),u(2),h(i.description||"-")}}function be(a,e){if(a&1&&(F(0),t(1,"form",18)(2,"nz-form-item")(3,"nz-form-label",19),o(4,"\u0646\u0627\u0645 \u06AF\u0631\u0648\u0647"),n(),t(5,"nz-form-control",20),C(6,"input",21),n()(),t(7,"nz-form-item")(8,"nz-form-label",22),o(9,"\u062A\u0648\u0636\u06CC\u062D\u0627\u062A"),n(),t(10,"nz-form-control",22),C(11,"textarea",23),n()()(),M()),a&2){let i=g();u(),l("formGroup",i.validateForm),u(2),l("nzSm",6)("nzXs",24),u(2),l("nzSm",14)("nzXs",24),u(3),l("nzSm",6)("nzXs",24),u(2),l("nzSm",14)("nzXs",24)}}var _e=class a{constructor(e,i,r){this.fb=e;this.notification=i;this.http=r}accountTypes=[];isModalVisible=!1;validateForm;apiUrl=J.endpoints.bankAccountType;ngOnInit(){this.validateForm=this.fb.group({name:["",[X.required]],description:[""]}),this.getAccountTypes()}getAccountTypes(){this.http.get(this.apiUrl).subscribe({next:e=>{this.accountTypes=e},error:e=>{this.notification.error("\u062E\u0637\u0627","\u062F\u0631\u06CC\u0627\u0641\u062A \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u06AF\u0631\u0648\u0647\u200C\u0647\u0627\u06CC \u062D\u0633\u0627\u0628 \u0628\u0627 \u0645\u0634\u06A9\u0644 \u0645\u0648\u0627\u062C\u0647 \u0634\u062F."),console.error(e)}})}showModal(){this.validateForm.reset(),this.isModalVisible=!0}handleOk(){if(this.validateForm.valid){let e={name:this.validateForm.value.name,description:this.validateForm.value.description||""};this.http.post(this.apiUrl,e).subscribe({next:()=>{this.notification.success("\u0645\u0648\u0641\u0642","\u06AF\u0631\u0648\u0647 \u062C\u062F\u06CC\u062F \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u06CC\u062C\u0627\u062F \u0634\u062F."),this.isModalVisible=!1,this.getAccountTypes()},error:i=>{this.notification.error("\u062E\u0637\u0627","\u0627\u06CC\u062C\u0627\u062F \u06AF\u0631\u0648\u0647 \u062C\u062F\u06CC\u062F \u0628\u0627 \u0645\u0634\u06A9\u0644 \u0645\u0648\u0627\u062C\u0647 \u0634\u062F."),console.error(i)}})}else Object.values(this.validateForm.controls).forEach(e=>{e.invalid&&(e.markAsDirty(),e.updateValueAndValidity({onlySelf:!0}))})}handleCancel(){this.isModalVisible=!1}deleteGroup(e){let i=`${this.apiUrl}${e}/`;this.http.delete(i).subscribe({next:()=>{this.notification.info("\u062D\u0630\u0641 \u0634\u062F","\u06AF\u0631\u0648\u0647 \u062D\u0630\u0641 \u06AF\u0631\u062F\u06CC\u062F."),this.getAccountTypes()},error:r=>{this.notification.error("\u062E\u0637\u0627","\u062D\u0630\u0641 \u06AF\u0631\u0648\u0647 \u0628\u0627 \u0645\u0634\u06A9\u0644 \u0645\u0648\u0627\u062C\u0647 \u0634\u062F."),console.error(r)}})}static \u0275fac=function(i){return new(i||a)(d($),d(te),d(x))};static \u0275cmp=b({type:a,selectors:[["app-bank-account-group"]],decls:32,vars:5,consts:[["groupTable",""],[1,"financial-year-page"],[1,"page-header"],["nz-button","","nzType","primary","nzShape","round",3,"click"],["nz-icon","","nzType","plus"],[1,"custom-card"],[1,"custom-card__header"],[1,"custom-card__title"],[1,"custom-card__subtitle"],[1,"custom-card__body"],[1,"financial-table",3,"nzData","nzSize"],[2,"width","30%"],[1,"actions-header"],["nzTitle","\u0627\u06CC\u062C\u0627\u062F \u06AF\u0631\u0648\u0647 \u062D\u0633\u0627\u0628 \u062C\u062F\u06CC\u062F",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzOkText","nzCancelText"],[4,"nzModalContent"],[1,"actions"],["nz-button","","nzShape","round","nzType","primary","nzSize","small"],["nz-button","","nzDanger","","nzShape","round","nzType","primary","nzSize","small","nz-popconfirm","","nzPopconfirmTitle","\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0628\u0627\u0646\u06A9 \u0645\u0637\u0645\u0626\u0646 \u0647\u0633\u062A\u06CC\u062F\u061F",3,"nzOnConfirm"],["nz-form","",1,"modal-form",3,"formGroup"],["nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","\u0644\u0637\u0641\u0627 \u0646\u0627\u0645 \u06AF\u0631\u0648\u0647 \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F!",3,"nzSm","nzXs"],["nz-input","","formControlName","name","placeholder","\u0645\u062B\u0644\u0627 \u062D\u0633\u0627\u0628\u200C\u0647\u0627\u06CC \u062C\u0627\u0631\u06CC"],[3,"nzSm","nzXs"],["nz-input","","formControlName","description","placeholder","(\u0627\u062E\u062A\u06CC\u0627\u0631\u06CC)"]],template:function(i,r){if(i&1){let m=_();t(0,"div",1)(1,"div",2)(2,"div")(3,"h1"),o(4,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u06AF\u0631\u0648\u0647 \u062D\u0633\u0627\u0628 \u0628\u0627\u0646\u06A9\u06CC"),n(),t(5,"p"),o(6,"\u062A\u0639\u0631\u06CC\u0641 \u0648 \u0645\u062F\u06CC\u0631\u06CC\u062A \u06AF\u0631\u0648\u0647\u200C\u0647\u0627\u06CC \u062D\u0633\u0627\u0628 \u0628\u0627\u0646\u06A9\u06CC"),n()(),t(7,"button",3),f("click",function(){return c(m),p(r.showModal())}),C(8,"span",4),o(9," \u06AF\u0631\u0648\u0647 \u062C\u062F\u06CC\u062F "),n()(),t(10,"div",5)(11,"div",6)(12,"h2",7),o(13,"\u0644\u06CC\u0633\u062A \u06AF\u0631\u0648\u0647\u200C\u0647\u0627"),n(),t(14,"p",8),o(15,"\u062A\u0645\u0627\u0645 \u06AF\u0631\u0648\u0647\u200C\u0647\u0627\u06CC \u062A\u0639\u0631\u06CC\u0641 \u0634\u062F\u0647 \u062F\u0631 \u0633\u06CC\u0633\u062A\u0645"),n()(),t(16,"div",9)(17,"nz-table",10,0)(19,"thead")(20,"tr")(21,"th",11),o(22,"\u0646\u0627\u0645 \u06AF\u0631\u0648\u0647"),n(),t(23,"th"),o(24,"\u062A\u0648\u0636\u06CC\u062D\u0627\u062A"),n(),t(25,"th",12),o(26,"\u0639\u0645\u0644\u06CC\u0627\u062A"),n()()(),t(27,"tbody"),y(28,he,10,2,"tr",null,ge),n()()()()(),t(30,"nz-modal",13),S("nzVisibleChange",function(z){return c(m),T(r.isModalVisible,z)||(r.isModalVisible=z),p(z)}),f("nzOnCancel",function(){return c(m),p(r.handleCancel())})("nzOnOk",function(){return c(m),p(r.handleOk())}),v(31,be,12,9,"ng-container",14),n()}i&2&&(u(17),l("nzData",r.accountTypes)("nzSize","middle"),u(11),A(r.accountTypes),u(2),N("nzVisible",r.isModalVisible),l("nzOkText","\u0627\u06CC\u062C\u0627\u062F")("nzCancelText","\u0627\u0646\u0635\u0631\u0627\u0641"))},dependencies:[O,q,W,I,j,U,L,H,R,ce,ae,oe,re,me,ue,le,E,P,V,w,D,k,ee,Z,Y,ze,G,B,de,se,fe,Ce,Q,K,ie,ne,pe],styles:[".financial-year-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;padding:2rem;border-radius:8px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:600}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0 0}.custom-card[_ngcontent-%COMP%]{border-radius:8px}.custom-card__header[_ngcontent-%COMP%]{padding:1.5rem 1.5rem 1rem}.custom-card__title[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:500}.custom-card__subtitle[_ngcontent-%COMP%]{margin:.5rem 0 0}.custom-card__body[_ngcontent-%COMP%]{padding:1.5rem}.financial-table[_ngcontent-%COMP%]     .ant-table-content{overflow-x:auto}.financial-table[_ngcontent-%COMP%]     .ant-table-wrapper{background:transparent}.financial-table[_ngcontent-%COMP%]     .ant-table-thead>tr>th{text-align:right}.financial-table[_ngcontent-%COMP%]     .ant-table-tbody>tr td{background-color:transparent;text-align:right;transition:background-color .2s}.financial-table[_ngcontent-%COMP%]     td .ant-btn{margin-left:.5rem}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:nowrap}"]})};export{_e as BankAccountGroupComponent};
